
# BÁO CÁO BÀI TẬP LỚN

---

## **Trang bìa**

**TRƯỜNG:** ........................................................

**KHOA:** ........................................................

**MÔN HỌC:** ........................................................


<br>
<br>

**TÊN ĐỀ TÀI:**

### **XÂY DỰNG WEBSITE THƯƠNG MẠI ĐIỆN TỬ "SWEETSHOP"**

<br>

**Nhóm/Lớp:** ........................................................

**Danh sách thành viên:**

| STT | Họ và tên | Mã sinh viên | Vai trò |
|---|---|---|---|
| 1 | | | |
| 2 | | | |

**Thời gian thực hiện:** ..............................................

<br>
<br>
<br>

---

*(Trang tiếp theo)*

---

### **Tóm tắt (Abstract)**

Trong bối cảnh cuộc cách mạng công nghiệp 4.0 và sự thay đổi trong hành vi người tiêu dùng, thương mại điện tử đã trở thành một nền tảng kinh doanh không thể thiếu. Báo cáo này trình bày chi tiết quá trình nghiên cứu, thiết kế, và phát triển hệ thống website "Sweetshop" - một giải pháp thương mại điện tử hoàn chỉnh cho các cửa hàng đồ ngọt. Dự án áp dụng phương pháp phát triển phần mềm linh hoạt, được xây dựng trên nền tảng công nghệ Python với framework Flask, hệ quản trị cơ sở dữ liệu quan hệ SQLite, và kiến trúc Monolithic theo mô hình MVC. Kết quả của dự án là một ứng dụng web hoạt động ổn định, cung cấp đầy đủ các chức năng cho người dùng cuối (duyệt sản phẩm, giỏ hàng, đặt hàng) và một giao diện quản trị mạnh mẽ cho chủ cửa hàng (quản lý sản phẩm, đơn hàng). Đóng góp chính của đề tài là việc xây dựng một sản phẩm phần mềm có cấu trúc tốt, dễ bảo trì, mở rộng và sẵn sàng để triển khai trong thực tế, cung cấp một ví dụ điển hình về việc ứng dụng công nghệ web hiện đại để giải quyết bài toán kinh doanh cụ thể.

---

### **Mục lục**

*(Lưu ý: Đây là mục lục tĩnh. Khi hoàn thiện trên Word, bạn cần cập nhật lại thành mục lục tự động)*

1.  Giới thiệu
    1.1. Bối cảnh và Tính cấp thiết của đề tài
    1.2. Mục tiêu của đề tài
    1.3. Đối tượng và Phạm vi nghiên cứu
    1.4. Đóng góp của đề tài
    1.5. Cấu trúc báo cáo

2.  Tổng quan và Phân tích Yêu cầu
    2.1. Khảo sát các giải pháp tương tự
    2.2. Phân tích yêu cầu người dùng
    2.3. Đặc tả yêu cầu hệ thống

3.  Thiết kế hệ thống
    3.1. Thiết kế kiến trúc
    3.2. Thiết kế cơ sở dữ liệu
    3.3. Thiết kế giao diện người dùng (UI/UX)
    3.4. Thiết kế bảo mật

4.  Cài đặt và Công nghệ
    4.1. Stack Công nghệ
    4.2. Môi trường phát triển và Cài đặt
    4.3. Cấu trúc thư mục dự án

5.  Phát triển và Kiểm thử
    5.1. Quy trình phát triển
    5.2. Kiểm thử và Đảm bảo chất lượng

6.  Demo và Kết quả
    6.1. Kịch bản Demo
    6.2. Kết quả đạt được

7.  Kết luận và Hướng phát triển
    7.1. Kết luận
    7.2. Hạn chế của đề tài
    7.3. Hướng phát triển

8.  Tài liệu tham khảo

9.  Phụ lục

---

### **Chương 1: Giới thiệu**

#### **1.1. Bối cảnh và Tính cấp thiết của đề tài**

Sự bùng nổ của internet và các thiết bị di động đã làm thay đổi sâu sắc thói quen mua sắm của người tiêu dùng. Thương mại điện tử (e-commerce) không còn là một lựa chọn mà đã trở thành một yêu cầu bắt buộc đối với các doanh nghiệp muốn tồn tại và phát triển. Đặc biệt, sau đại dịch COVID-19, xu hướng mua sắm trực tuyến càng trở nên phổ biến, buộc các doanh nghiệp, kể cả các cửa hàng nhỏ lẻ, phải nhanh chóng chuyển đổi số.

Đối với ngành hàng thực phẩm và đồ uống (F&B), đặc biệt là các cửa hàng bánh ngọt, việc kinh doanh truyền thống tại cửa hàng vật lý gặp nhiều hạn chế: giới hạn về không gian địa lý, thời gian phục vụ, và khả năng tiếp cận khách hàng. "Nỗi đau" chính của các cửa hàng này là sự phụ thuộc vào lượng khách hàng vãng lai và khó khăn trong việc quản lý đơn đặt hàng với số lượng lớn một cách thủ công. Do đó, việc xây dựng một website bán hàng chuyên nghiệp là một giải pháp cấp thiết, giúp giải quyết các vấn đề trên, mở rộng thị trường và nâng cao hiệu quả hoạt động.

#### **1.2. Mục tiêu của đề tài**

**1.2.1. Mục tiêu tổng quát**

Xây dựng một hệ thống website thương mại điện tử hoàn chỉnh, có hiệu năng tốt, an toàn và dễ sử dụng cho thương hiệu "Sweetshop", giúp doanh nghiệp tối ưu hóa quy trình bán hàng và nâng cao trải nghiệm khách hàng.

**1.2.2. Mục tiêu cụ thể**

*   Xây dựng hoàn chỉnh các chức năng phía người dùng:
    *   Xác thực người dùng: Đăng ký, Đăng nhập, Đăng xuất.
    *   Quản lý sản phẩm: Xem danh sách, xem chi tiết, tìm kiếm sản phẩm.
    *   Quản lý giỏ hàng: Thêm, xóa, cập nhật số lượng sản phẩm.
    *   Quy trình thanh toán: Quản lý địa chỉ giao hàng, đặt hàng với phương thức thanh toán khi nhận hàng (COD).
    *   Quản lý tài khoản: Xem lịch sử đơn hàng.
*   Xây dựng hoàn chỉnh trang quản trị (Admin Panel):
    *   Quản lý sản phẩm: Thêm, sửa, xóa sản phẩm.
    *   Quản lý đơn hàng: Xem danh sách đơn hàng, cập nhật trạng thái đơn hàng.
    *   Quản lý người dùng: Xem danh sách người dùng.
*   Đảm bảo các yêu cầu phi chức năng như bảo mật, hiệu năng và giao diện thân thiện.

#### **1.3. Đối tượng và Phạm vi nghiên cứu**

**1.3.1. Đối tượng người dùng**

*   **Khách hàng:** Người dùng cuối có nhu cầu mua sắm các sản phẩm bánh ngọt trực tuyến. Họ có thể ở nhiều độ tuổi khác nhau, có kỹ năng sử dụng internet và các trang web thương mại điện tử ở mức cơ bản.
*   **Quản trị viên:** Chủ cửa hàng hoặc nhân viên được giao nhiệm vụ vận hành website, quản lý nội dung sản phẩm và xử lý các đơn đặt hàng.

**1.3.2. Phạm vi của đề tài**

*   **Trong phạm vi:**
    *   Phân tích, thiết kế, và phát triển các chức năng đã nêu trong mục tiêu cụ thể.
    *   Sử dụng framework Flask và các thư viện trong hệ sinh thái Python.
    *   Triển khai ứng dụng trên môi trường local.
*   **Ngoài phạm vi:**
    *   Không tích hợp các cổng thanh toán điện tử (VNPAY, Momo, Stripe...).
    *   Không phát triển ứng dụng di động (Mobile App).
    *   Không xây dựng các tính năng marketing phức tạp (chương trình khuyến mãi, hệ thống affiliate...).

#### **1.4. Đóng góp của đề tài**

Đề tài cung cấp một giải pháp phần mềm hoàn chỉnh, có thể được áp dụng ngay vào thực tế cho các cửa hàng kinh doanh nhỏ. Về mặt kỹ thuật, dự án là một ví dụ điển hình về việc xây dựng ứng dụng web bằng Flask theo các chuẩn mực thiết kế hiện đại, giúp người đọc hiểu rõ hơn về kiến trúc Monolithic, mô hình MVC, và cách tổ chức dự án với Blueprints.

#### **1.5. Cấu trúc báo cáo**

Báo cáo được tổ chức thành 7 chương chính. Chương 1 giới thiệu tổng quan. Chương 2 đi sâu vào khảo sát và phân tích yêu cầu. Chương 3 trình bày chi tiết các quyết định thiết kế hệ thống. Chương 4 và 5 mô tả công nghệ sử dụng, quy trình cài đặt và kiểm thử. Chương 6 trình bày kịch bản demo và các kết quả đạt được. Cuối cùng, Chương 7 đưa ra kết luận và các hướng phát triển trong tương lai.

---

### **Chương 2: Tổng quan và Phân tích Yêu cầu**

#### **2.1. Khảo sát các giải pháp tương tự**

*(Lưu ý: Mục này cần được bạn tự thực hiện bằng cách tìm kiếm và phân tích các website bán bánh ngọt khác. Dưới đây là bảng mẫu.)*

| Tiêu chí | Website A | Website B | Dự án Sweetshop |
|---|---|---|---|
| **Tính năng** | | | Giỏ hàng, thanh toán COD |
| **UX/UI** | | | Giao diện sạch sẽ, thân thiện |
| **Công nghệ** | (Nếu biết) | (Nếu biết) | Python/Flask |
| **Ưu điểm** | | | Linh hoạt, dễ mở rộng |
| **Nhược điểm** | | | Chưa có thanh toán online |

#### **2.2. Phân tích yêu cầu người dùng**

**2.2.1. Kịch bản sử dụng (Use Cases)**

Để mô hình hóa tương tác giữa người dùng và hệ thống, chúng tôi sử dụng sơ đồ Use Case. 

***[Chèn ảnh: Sơ đồ Use Case tổng quát tại đây]***
*(Mô tả ảnh: Sơ đồ bao gồm 2 actors là Khách hàng và Quản trị viên, cùng các Use Case chính như Đăng nhập, Mua hàng, Quản lý sản phẩm...)*

**Mô tả chi tiết Use Case "Mua hàng":**
*   **Tên Use Case:** Mua hàng.
*   **Actor:** Khách hàng.
*   **Tiền điều kiện:** Khách hàng đã truy cập vào website.
*   **Luồng sự kiện chính:**
    1.  Khách hàng chọn một sản phẩm từ danh sách.
    2.  Hệ thống hiển thị trang chi tiết sản phẩm.
    3.  Khách hàng chọn số lượng và nhấn "Thêm vào giỏ hàng".
    4.  Hệ thống cập nhật giỏ hàng và hiển thị thông báo thành công.
    5.  Khách hàng vào trang giỏ hàng.
    6.  Khách hàng nhấn "Tiến hành thanh toán".
    7.  Hệ thống kiểm tra trạng thái đăng nhập. Nếu chưa đăng nhập, yêu cầu khách hàng đăng nhập hoặc đăng ký.
    8.  Khách hàng chọn/nhập địa chỉ giao hàng và nhấn "Đặt hàng".
    9.  Hệ thống ghi nhận đơn hàng, gửi email xác nhận và hiển thị trang đặt hàng thành công.
*   **Luồng rẽ nhánh:**
    *   Tại bước 7, nếu khách hàng chọn Đăng ký, hệ thống sẽ chuyển đến trang Đăng ký trước khi quay lại quy trình thanh toán.
    *   Tại bước 3, nếu số lượng tồn kho không đủ, hệ thống sẽ hiển thị thông báo lỗi.

#### **2.3. Đặc tả yêu cầu hệ thống**

**2.3.1. Yêu cầu chức năng (Functional Requirements)**

| ID | Yêu cầu | 
|---|---| 
| FR01 | Hệ thống phải cho phép người dùng xem danh sách sản phẩm. | 
| FR02 | Hệ thống phải cho phép người dùng xem chi tiết từng sản phẩm. | 
| FR03 | Hệ thống phải cho phép người dùng đăng ký tài khoản mới bằng email và mật khẩu. | 
| FR04 | Hệ thống phải cho phép người dùng đăng nhập bằng tài khoản đã đăng ký. |
| FR05 | Hệ thống phải cho phép người dùng thêm sản phẩm vào giỏ hàng. | 
| FR06 | Hệ thống phải cho phép người dùng thay đổi số lượng hoặc xóa sản phẩm khỏi giỏ hàng. | 
| FR07 | Hệ thống phải cho phép người dùng đặt hàng và cung cấp địa chỉ giao hàng. | 
| FR08 | Hệ thống phải cho phép người dùng xem lại lịch sử các đơn hàng đã đặt. |
| FR09 | Hệ thống phải có trang quản trị riêng, yêu cầu đăng nhập bằng tài khoản admin. |
| FR10 | Quản trị viên phải có quyền thêm, sửa, xóa sản phẩm. | 
| FR11 | Quản trị viên phải có quyền xem tất cả đơn hàng và cập nhật trạng thái của chúng. |

**2.3.2. Yêu cầu phi chức năng (Non-functional Requirements)**

*   **NFR1 - Hiệu năng:** Thời gian phản hồi của máy chủ cho một yêu cầu thông thường (không bao gồm xử lý phức tạp) phải dưới 500ms. Các trang chính (trang chủ, trang sản phẩm) phải được tải và hiển thị nội dung chính (LCP) trong vòng dưới 3 giây trên kết nối mạng trung bình.
*   **NFR2 - Bảo mật:** Mật khẩu của người dùng phải được lưu trong cơ sở dữ liệu dưới dạng đã được mã hóa một chiều (hashed) sử dụng thuật toán an toàn như Bcrypt. Hệ thống phải có các cơ chế phòng chống các loại tấn công web phổ biến như Cross-Site Scripting (XSS), Cross-Site Request Forgery (CSRF), và SQL Injection.
*   **NFR3 - Tính dễ sử dụng:** Giao diện người dùng phải được thiết kế sạch sẽ, nhất quán và trực quan, giúp người dùng không rành về công nghệ cũng có thể dễ dàng thực hiện các thao tác mua sắm.
*   **NFR4 - Khả năng bảo trì và mở rộng:** Mã nguồn phải được tổ chức một cách module hóa, tuân thủ các quy ước đặt tên và định dạng mã, có σχόλια giải thích cho các đoạn mã phức tạp để dễ dàng bảo trì và nâng cấp trong tương lai.

---

### **Chương 3: Thiết kế hệ thống**

Trong chương này, chúng tôi sẽ trình bày chi tiết các quyết định thiết kế từ kiến trúc tổng thể, cơ sở dữ liệu cho đến giao diện người dùng và các cơ chế bảo mật.

#### **3.1. Thiết kế kiến trúc**

**3.1.1. Lựa chọn kiến trúc**

Dự án được xây dựng dựa trên kiến trúc **Monolithic**. Trong mô hình này, tất cả các thành phần của ứng dụng (xử lý logic, tương tác CSDL, giao diện) được gói gọn trong một cơ sở mã duy nhất và được triển khai như một thể thống nhất. 
*   **Ưu điểm:** Đơn giản trong việc phát triển, kiểm thử và triển khai ở giai đoạn đầu. Giao tiếp giữa các thành phần diễn ra nhanh chóng (qua các lời gọi hàm trực tiếp).
*   **Nhược điểm:** Khó khăn hơn trong việc mở rộng quy mô một cách độc lập cho từng thành phần. Việc thay đổi công nghệ cho một phần của hệ thống sẽ phức tạp.

Lựa chọn này là phù hợp với quy mô và các yêu cầu ban đầu của dự án, giúp đẩy nhanh quá trình phát triển.

**3.1.2. Sơ đồ kiến trúc**

Kiến trúc của ứng dụng tuân theo mô hình 3 lớp (3-Tier Architecture) kinh điển.

***[Chèn ảnh: Sơ đồ kiến trúc 3 lớp của ứng dụng tại đây]***
*(Mô tả ảnh: Sơ đồ gồm 3 khối: Presentation Tier (Web Browser), Logic Tier (Flask Application Server), và Data Tier (Database). Mũi tên chỉ luồng request/response giữa các khối.)*

**3.1.3. Luồng xử lý yêu cầu**

Một yêu cầu HTTP từ người dùng sẽ được xử lý theo luồng sau:

***[Chèn ảnh: Sơ đồ chuỗi (Sequence Diagram) cho chức năng Đăng nhập tại đây]***
*(Mô tả ảnh: Sơ đồ Sequence thể hiện các bước: User gửi request đến Browser, Browser gửi đến Flask App, Flask App gọi đến LoginForm để validate, sau đó gọi đến User Model để truy vấn CSDL, và cuối cùng trả về response.)*

#### **3.2. Thiết kế cơ sở dữ liệu**

**3.2.1. Sơ đồ quan hệ thực thể (ERD)**

Cơ sở dữ liệu là trái tim của hệ thống, lưu trữ toàn bộ thông tin về người dùng, sản phẩm, và đơn hàng. Mối quan hệ giữa các thực thể được mô tả trong sơ đồ ERD dưới đây.

***[Chèn ảnh: Sơ đồ Quan hệ Thực thể (ERD) chi tiết tại đây]***
*(Mô tả ảnh: Sơ đồ ERD được vẽ bằng công cụ chuyên nghiệp, thể hiện rõ các bảng, thuộc tính, khóa chính, khóa ngoại và bản số (1-1, 1-N).)*

**3.2.2. Đặc tả chi tiết các bảng**

*(Lưu ý: Đây là ví dụ cho bảng User, các bảng khác được đặc tả tương tự trong Phụ lục)*

**Bảng: `User`**

| Tên cột | Kiểu dữ liệu | Khóa | Ràng buộc | Diễn giải |
|---|---|---|---|---|
| `id` | Integer | PK | NOT NULL, AUTOINCREMENT | Khóa chính tự tăng |
| `username` | String(80) | | UNIQUE, NOT NULL | Tên đăng nhập của người dùng |
| `email` | String(120) | | UNIQUE, NOT NULL | Email của người dùng |
| `password_hash` | String(128) | | NOT NULL | Chuỗi hash của mật khẩu |
| `is_admin` | Boolean | | DEFAULT(False) | Cờ xác định quyền quản trị viên |
| `created_at` | DateTime | | DEFAULT(utcnow) | Thời gian tạo tài khoản |


#### **3.3. Thiết kế giao diện người dùng (UI/UX)**

*(Lưu ý: Mục này cần được minh họa bằng các bản vẽ tay hoặc thiết kế trên các công cụ như Figma, Balsamiq.)*

*   **Nguyên tắc thiết kế:** Giao diện được thiết kế theo phong cách tối giản, sạch sẽ, tập trung vào sản phẩm. Sử dụng màu sắc nhẹ nhàng, font chữ dễ đọc.
*   **Wireframe:**

    ***[Chèn ảnh: Wireframe (bản vẽ khung) của Trang chủ tại đây]***

    ***[Chèn ảnh: Wireframe của Trang chi tiết sản phẩm tại đây]***

*   **Cấu trúc template:** Áp dụng cơ chế kế thừa template của Jinja2. Một file `base.html` định nghĩa cấu trúc chung (header, footer, menu), các trang con sẽ kế thừa và điền vào khối `{% block content %}`.

#### **3.4. Thiết kế bảo mật**

*   **Mã hóa mật khẩu:** Mật khẩu không bao giờ được lưu trữ dưới dạng văn bản gốc. Hàm `set_password` trong model `User` sẽ sử dụng `generate_password_hash` của Werkzeug để tạo chuỗi hash trước khi lưu.

    ```python
    # Trích đoạn code trong app/models.py
    from werkzeug.security import generate_password_hash, check_password_hash

    class User(db.Model, UserMixin):
        # ...
        def set_password(self, password):
            self.password_hash = generate_password_hash(password)

        def check_password(self, password):
            return check_password_hash(self.password_hash, password)
    ``` 

    ***[Chèn code: Đoạn mã hàm set_password và check_password]***

*   **Quản lý phiên:** Sử dụng thư viện Flask-Login để quản lý session của người dùng, tự động xử lý việc lưu trữ cookie an toàn.
*   **Phân quyền:** Dựa vào trường `is_admin` và decorator `@admin_required` để bảo vệ các route của trang quản trị, ngăn chặn truy cập trái phép.

---

### **Chương 4: Cài đặt và Công nghệ**

Chương này tập trung vào các khía cạnh kỹ thuật của dự án, bao gồm ngăn xếp công nghệ (technology stack) đã được lựa chọn, hướng dẫn chi tiết về cách cài đặt và cấu hình môi trường phát triển, cũng như giải thích về cấu trúc tổ chức mã nguồn của dự án.

#### **4.1. Stack Công nghệ**

Việc lựa chọn công nghệ phù hợp là yếu tố nền tảng quyết định sự thành công của dự án. Chúng tôi đã lựa chọn một ngăn xếp công nghệ phổ biến, mạnh mẽ và có cộng đồng hỗ trợ lớn trong hệ sinh thái Python.

| Hạng mục | Công nghệ | Vai trò và Lý do lựa chọn |
|---|---|---|
| **Ngôn ngữ** | **Python 3** | Là một ngôn ngữ lập trình bậc cao, dễ đọc, dễ học và có hệ sinh thái thư viện cực kỳ phong phú, đặc biệt mạnh mẽ cho phát triển web. |
| **Framework Backend** | **Flask** | Một micro-framework linh hoạt, gọn nhẹ. Flask không áp đặt một cấu trúc cứng nhắc, cho phép lập trình viên toàn quyền quyết định thiết kế, rất phù hợp cho các dự án có quy mô từ nhỏ đến trung bình và cần sự tùy biến cao. |
| **ORM** | **SQLAlchemy** | Là một thư viện ORM (Object-Relational Mapping) mạnh mẽ nhất của Python. Nó giúp trừu tượng hóa các câu lệnh SQL, cho phép tương tác với cơ sở dữ liệu thông qua các đối tượng Python, giúp mã nguồn sạch sẽ, an toàn và dễ bảo trì hơn. |
| **Database Migrations** | **Flask-Migrate** | Một extension tích hợp Alembic vào Flask, cung cấp một cơ chế mạnh mẽ và an toàn để quản lý các thay đổi về cấu trúc cơ sở dữ liệu (schema migrations) mỗi khi có sự thay đổi trong models. |
| **Xử lý Forms** | **Flask-WTF** | Tích hợp thư viện WTForms vào Flask, cung cấp một giải pháp toàn diện để tạo, xử lý và xác thực (validate) các biểu mẫu phía server. Nó cũng tích hợp sẵn cơ chế chống tấn công CSRF. |
| **Xác thực người dùng** | **Flask-Login** | Quản lý các phiên đăng nhập của người dùng, xử lý các trạng thái đăng nhập/đăng xuất, và cung cấp các công cụ để bảo vệ các trang yêu cầu xác thực. |
| **Template Engine** | **Jinja2** | Là template engine mặc định của Flask, mạnh mẽ và an toàn. Nó cho phép nhúng các logic lập trình (biến, vòng lặp, điều kiện) vào file HTML và có cơ chế tự động chống tấn công XSS. |
| **Cơ sở dữ liệu** | **SQLite** | Một hệ quản trị CSDL quan hệ gọn nhẹ, không cần server riêng, lưu trữ toàn bộ CSDL trong một file duy nhất. SQLite rất phù hợp cho giai đoạn phát triển và các ứng dụng quy mô nhỏ do sự đơn giản và tiện lợi của nó. |

#### **4.2. Môi trường phát triển và Cài đặt**

**4.2.1. Yêu cầu môi trường**
*   Python phiên bản 3.8 trở lên.
*   `pip` (trình quản lý gói của Python).
*   `git` (hệ thống quản lý phiên bản).

**4.2.2. Các bước cài đặt chi tiết**

1.  **Tải mã nguồn về máy:**
    *   Mở terminal hoặc command prompt và chạy lệnh sau:
        ```bash
        git clone <URL_repository_cua_ban>
        cd sweetshop 
        ```

2.  **Tạo và kích hoạt môi trường ảo:**
    *   Việc sử dụng môi trường ảo là một best practice để cô lập các thư viện của dự án, tránh xung đột với các dự án khác trên cùng một máy.
        ```bash
        # Lệnh tạo môi trường ảo tên là 'venv'
        python -m venv venv
        
        # Lệnh kích hoạt môi trường ảo (trên Windows)
        .\venv\Scripts\activate
        
        # (Trên macOS/Linux)
        # source venv/bin/activate
        ```

3.  **Cài đặt các thư viện cần thiết:**
    *   Tệp `requirements.txt` chứa danh sách tất cả các thư viện mà dự án phụ thuộc. Lệnh sau sẽ tự động cài đặt tất cả chúng:
        ```bash
        pip install -r requirements.txt
        ```

4.  **Cấu hình biến môi trường:**
    *   Tạo một tệp mới có tên là `.env` trong thư mục gốc của dự án.
    *   Mở tệp `.env` và thêm vào nội dung sau. `SECRET_KEY` là một chuỗi ký tự ngẫu nhiên, dùng để mã hóa session và các dữ liệu nhạy cảm khác.
        ```
        SECRET_KEY='mot-chuoi-ky-tu-bi-mat-va-rat-dai-o-day'
        ```

5.  **Khởi tạo và cập nhật Cơ sở dữ liệu:**
    *   Các lệnh sau sử dụng Flask-Migrate để tạo các bảng trong CSDL dựa trên các model đã định nghĩa.
        ```bash
        # Áp dụng các thay đổi vào CSDL
        flask db upgrade
        ```
        *(Lưu ý: `flask db init` và `flask db migrate` chỉ cần dùng khi bắt đầu dự án hoặc khi có thay đổi model)*

6.  **Chạy ứng dụng:**
    *   Sau khi hoàn tất các bước trên, chạy lệnh sau để khởi động server phát triển:
        ```bash
        flask run
        ```
    *   Mở trình duyệt và truy cập vào địa chỉ `http://127.0.0.1:5000` để xem ứng dụng.

#### **4.3. Cấu trúc thư mục dự án**

Dự án được tổ chức một cách khoa học để đảm bảo tính module hóa và dễ dàng tìm kiếm, bảo trì.

***[Chèn ảnh: Cấu trúc thư mục dự án trong Visual Studio Code tại đây]***

```
/sweetshop
|-- app/              # Thư mục chứa toàn bộ mã nguồn chính của ứng dụng
|   |-- __init__.py   # File khởi tạo (Application Factory), nơi tạo và cấu hình app Flask
|   |-- admin/        # Blueprint cho các chức năng của trang quản trị
|   |   |-- __init__.py
|   |   |-- routes.py   # Chứa các route và logic cho trang admin
|   |   `-- forms.py    # Chứa các form của trang admin
|   |-- auth/         # Blueprint cho các chức năng xác thực
|   |   |-- __init__.py
|   |   |-- routes.py   # Route cho đăng nhập, đăng ký, đăng xuất
|   |   `-- forms.py    # Form đăng nhập, đăng ký
|   |-- main/         # Blueprint cho các chức năng chính của người dùng
|   |   |-- __init__.py
|   |   |-- routes.py   # Route cho trang chủ, sản phẩm, giỏ hàng...
|   |   `-- forms.py    # Form thêm vào giỏ hàng, địa chỉ...
|   |-- static/       # Chứa các tệp tĩnh (CSS, JavaScript, hình ảnh)
|   |-- templates/    # Chứa các tệp template HTML (Jinja2)
|   |-- decorators.py # Chứa các custom decorator (vd: @admin_required)
|   |-- extensions.py # Khởi tạo các extension (SQLAlchemy, LoginManager)
|   `-- models.py     # Định nghĩa các model cho CSDL
|-- migrations/       # Chứa các script tự động sinh ra bởi Flask-Migrate
|-- instance/         # Thư mục chứa các file không thuộc version control (vd: file CSDL SQLite)
|   `-- sweetshop.db  # File CSDL SQLite
|-- .env              # File chứa các biến môi trường (local)
|-- config.py         # Chứa các lớp cấu hình cho các môi trường khác nhau
|-- requirements.txt  # Danh sách các thư viện Python cần cài đặt
`-- run.py            # Tệp chính để khởi chạy ứng dụng
```

---

### **Chương 5: Phát triển và Kiểm thử**

#### **5.1. Quy trình phát triển**

**5.1.1. Mô hình nhánh Git (Git Branching Model)**

Dự án đề xuất áp dụng mô hình **GitFlow**, một mô hình quản lý nhánh chuyên nghiệp và hiệu quả.

***[Chèn ảnh: Sơ đồ luồng GitFlow tại đây]***
*(Mô tả ảnh: Sơ đồ thể hiện các nhánh chính là `main` và `develop`, cùng các nhánh phụ như `feature`, `release`, `hotfix` và luồng di chuyển commit giữa chúng.)*

*   **`main`:** Nhánh chứa mã nguồn ổn định nhất, tương ứng với các phiên bản đã phát hành (production).
*   **`develop`:** Nhánh tích hợp các tính năng đã hoàn thiện. Đây là nhánh chính cho các hoạt động phát triển hàng ngày.
*   **`feature/*`:** Mỗi tính năng mới (ví dụ: `feature/cart`) sẽ được phát triển trên một nhánh riêng tách ra từ `develop`. Sau khi hoàn thành, nhánh này sẽ được gộp (merge) lại vào `develop`.
*   **`release/*`:** Khi `develop` đã có đủ tính năng cho một phiên bản mới, một nhánh `release` sẽ được tạo để chuẩn bị cho việc phát hành (sửa các lỗi nhỏ, chuẩn bị tài liệu).
*   **`hotfix/*`:** Dùng để sửa các lỗi nghiêm trọng phát hiện trên phiên bản production. Nhánh này được tách ra từ `main` và sau đó sẽ được gộp vào cả `main` và `develop`.

**5.1.2. Quy ước mã nguồn (Coding Conventions)**

*   Toàn bộ mã nguồn Python tuân thủ theo chuẩn **PEP 8**, sử dụng công cụ `flake8` hoặc `black` để tự động kiểm tra và định dạng mã.
*   Quy ước đặt tên: `PascalCase` cho tên lớp, `snake_case` cho biến và hàm, `UPPER_SNAKE_CASE` cho hằng số.

#### **5.2. Kiểm thử và Đảm bảo chất lượng**

*(Lưu ý: Dự án hiện tại chưa có bộ kiểm thử tự động. Phần này trình bày kế hoạch và các ví dụ mẫu.)*

**5.2.1. Các cấp độ kiểm thử**

*   **Unit Testing:** Kiểm thử các đơn vị mã nguồn nhỏ nhất một cách độc lập (thường là các hàm, phương thức). Ví dụ: kiểm thử hàm `set_password` trong model `User` có mã hóa đúng mật khẩu hay không.
*   **Integration Testing:** Kiểm thử sự tương tác giữa các thành phần khác nhau của hệ thống. Ví dụ: kiểm thử luồng "thêm sản phẩm vào giỏ hàng" có cập nhật đúng CSDL và trả về đúng response hay không.
*   **End-to-End (E2E) Testing:** Kiểm thử toàn bộ luồng hoạt động của ứng dụng từ góc nhìn người dùng, thường được tự động hóa bằng cách điều khiển trình duyệt.

**5.2.2. Framework và Công cụ**

*   **PyTest:** Một framework kiểm thử mạnh mẽ và phổ biến cho Python, được chọn để viết Unit Test và Integration Test.
*   **Selenium / Playwright:** Các công cụ để tự động hóa trình duyệt, dùng cho E2E testing.

**5.2.3. Bảng Test Cases mẫu**

| ID | Chức năng | Tiền điều kiện | Các bước | Kết quả mong đợi |
|---|---|---|---|---|
| TC-01 | Đăng nhập | User `test` tồn tại với pass `123456` | 1. Mở trang /login. 2. Nhập username `test`, pass `wrongpass`. 3. Nhấn Login. | Hiển thị thông báo lỗi "Invalid username or password". |
| TC-02 | Đăng nhập | User `test` tồn tại với pass `123456` | 1. Mở trang /login. 2. Nhập username `test`, pass `123456`. 3. Nhấn Login. | Chuyển hướng về trang chủ, hiển thị tên user `test`. |
| TC-03 | Thêm vào giỏ | Khách hàng đã đăng nhập. Sản phẩm có ID=1, tồn kho > 0. | 1. Mở trang /product/1. 2. Nhấn nút "Add to Cart". | Giỏ hàng của khách hàng trong CSDL chứa sản phẩm ID=1 với số lượng là 1. |
| TC-04 | Truy cập Admin | Người dùng `user` chưa được cấp quyền admin. | 1. Đăng nhập bằng tài khoản `user`. 2. Truy cập vào trang /admin/dashboard. | Hệ thống trả về lỗi 403 Forbidden. |

***[Chèn ảnh: Kết quả chạy một vài Unit Test với PyTest tại đây]***

---

### **Chương 6: Demo và Kết quả**

#### **6.1. Kịch bản Demo chi tiết**

**Phần 1: Trải nghiệm của Khách hàng**

1.  **Truy cập Trang chủ:** Mở trình duyệt, truy cập `http://127.0.0.1:5000`. Giao diện trang chủ hiện ra.
    
    ***[Chèn ảnh: Màn hình trang chủ của Sweetshop]***
    
2.  **Xem chi tiết sản phẩm:** Nhấp vào một sản phẩm bất kỳ. Trang chi tiết sản phẩm hiện ra với hình ảnh lớn, mô tả và giá.
    
    ***[Chèn ảnh: Màn hình trang chi tiết sản phẩm]***
    
3.  **Thêm vào giỏ hàng:** Nhấn nút "Add to Cart". Sản phẩm được thêm vào giỏ hàng.
4.  **Đăng ký tài khoản:** Vào trang giỏ hàng và nhấn "Thanh toán". Hệ thống chuyển đến trang đăng nhập. Chọn "Register here" để đăng ký tài khoản mới.
    
    ***[Chèn ảnh: Màn hình trang đăng ký]***
    
5.  **Thanh toán:** Sau khi đăng nhập, tiến hành thanh toán, điền địa chỉ giao hàng.
    
    ***[Chèn ảnh: Màn hình trang thanh toán (checkout)]***
    
6.  **Xem lịch sử đơn hàng:** Sau khi đặt hàng thành công, vào trang cá nhân để xem lại đơn hàng vừa đặt.
    
    ***[Chèn ảnh: Màn hình trang lịch sử đơn hàng]***

**Phần 2: Giao diện Quản trị**

1.  **Đăng nhập Admin:** Đăng xuất và đăng nhập lại bằng tài khoản admin.
2.  **Xem Dashboard:** Trang quản trị hiện ra với các thông tin tổng quan.
    
    ***[Chèn ảnh: Màn hình Dashboard của trang quản trị]***
    
3.  **Quản lý đơn hàng:** Vào mục "Orders", đơn hàng vừa đặt của khách hàng sẽ hiển thị ở đây. Cập nhật trạng thái đơn hàng từ "Pending" sang "Shipped".
    
    ***[Chèn ảnh: Màn hình quản lý đơn hàng]***
    
4.  **Thêm sản phẩm mới:** Vào mục "Products" và thêm một sản phẩm mới.
    
    ***[Chèn ảnh: Màn hình thêm sản phẩm mới]***

#### **6.2. Kết quả đạt được**

**6.2.1. Đối chiếu với Yêu cầu chức năng**

| ID | Yêu cầu | Trạng thái |
|---|---|---|
| FR01-FR11 | (Tất cả các yêu cầu chức năng đã liệt kê) | **Hoàn thành** |

**6.2.2. Đánh giá Yêu cầu phi chức năng**

*   **Hiệu năng:** Ứng dụng phản hồi nhanh trong môi trường phát triển. Cần kiểm thử tải (load testing) với công cụ như JMeter để có số liệu chính xác trong môi trường production.
*   **Bảo mật:** Các yêu cầu bảo mật cơ bản đã được đáp ứng (mã hóa mật khẩu, chống CSRF, XSS, SQLi).
*   **Tính dễ sử dụng:** Giao diện được thiết kế theo các quy chuẩn chung, dễ dàng cho người dùng mới làm quen.

---

### **Chương 7: Kết luận và Hướng phát triển**

#### **7.1. Kết luận**

Dự án đã thành công trong việc xây dựng một hệ thống website thương mại điện tử "Sweetshop" hoàn chỉnh, đáp ứng đầy đủ các yêu cầu nghiệp vụ đã đề ra. Từ việc phân tích yêu cầu, lựa chọn công nghệ, thiết kế kiến trúc, cho đến việc triển khai các chức năng, dự án đã tuân thủ các quy trình và chuẩn mực trong phát triển phần mềm. Sản phẩm cuối cùng không chỉ là một ứng dụng hoạt động được mà còn là một nền tảng có cấu trúc tốt, sẵn sàng cho việc bảo trì và phát triển các tính năng mới trong tương lai.

#### **7.2. Hạn chế của đề tài**

*   **Thiếu kiểm thử tự động:** Dự án chưa xây dựng được một bộ test tự động toàn diện, làm tăng rủi ro khi phát triển các tính năng mới.
*   **Giao diện người dùng:** UI/UX được xây dựng dựa trên template cơ bản, chưa có sự đầu tư sâu về nghiên cứu và thiết kế để tối ưu hóa trải nghiệm người dùng.
*   **Triển khai:** Dự án mới chỉ dừng lại ở việc chạy trên môi trường local, chưa có quy trình triển khai (deployment) lên môi trường production.

#### **7.3. Hướng phát triển**

*   **Tích hợp cổng thanh toán:** Tích hợp các cổng thanh toán điện tử phổ biến như VNPAY, Momo để cung cấp nhiều lựa chọn hơn cho khách hàng và tự động hóa quy trình tài chính.
*   **Xây dựng hệ thống gợi ý sản phẩm:** Nghiên cứu và triển khai mô hình học máy (ví dụ: Lọc cộng tác) để phân tích hành vi mua sắm và gợi ý các sản phẩm phù hợp, giúp tăng tỷ lệ chuyển đổi.
*   **Nâng cao trang quản trị:** Bổ sung các biểu đồ, thống kê trực quan về doanh thu, sản phẩm bán chạy, và các chỉ số kinh doanh quan trọng khác để hỗ trợ việc ra quyết định.
*   **Tối ưu hóa hiệu năng:** Sử dụng các kỹ thuật caching (ví dụ: Redis) cho các truy vấn CSDL thường xuyên để giảm thời gian tải trang.
*   **Hoàn thiện quy trình CI/CD:** Xây dựng một quy trình tích hợp và triển khai liên tục (CI/CD) với các công cụ như GitHub Actions và Docker để tự động hóa việc kiểm thử và triển khai ứng dụng.

---

### **Chương 8: Tài liệu tham khảo**

[1] Flask Documentation. [Online]. Available: https://flask.palletsprojects.com/

[2] SQLAlchemy Documentation. [Online]. Available: https://www.sqlalchemy.org/

[3] Jinja2 Documentation. [Online]. Available: https://jinja.palletsprojects.com/

[4] Flask-Login Documentation. [Online]. Available: https://flask-login.readthedocs.io/

[5] OWASP Top Ten Project. [Online]. Available: https://owasp.org/www-project-top-ten/

---

### **Chương 9: Phụ lục**

**Phụ lục A: Đặc tả chi tiết các bảng Cơ sở dữ liệu**

*(Bổ sung đặc tả chi tiết cho các bảng Product, Order, OrderItem, Address...)*

**Phụ lục B: File `.env.example`**

```
# Flask secret key - Change this to a long random string
SECRET_KEY='your-super-secret-and-random-key-here'

# Database configuration
# In this project, the DB path is configured in config.py, but it can be externalized here.
# DATABASE_URL='sqlite:///../instance/sweetshop.db'
```
